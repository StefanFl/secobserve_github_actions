.trivy_filesystem:
  image:
    name: stefanfle/secobserve-scanners:dev
  stage: test
  variables:
    FURTHER_PARAMETERS: ""
    TRIVY_NO_PROGRESS: "true"
    TRIVY_CACHE_DIR: "/usr/local/trivy/trivycache/"
    RUN_DIRECTORY: "."
    SO_UPLOAD: "true"
    SO_PARSER_NAME: "CycloneDX"
    SO_FILE_NAME: "$REPORT_NAME"
  script:
    - /entrypoints/entrypoint_trivy_filesystem.sh
  interruptible: true
  allow_failure: true
  cache:
    paths:
      - /usr/local/trivy/trivycache/
  artifacts:
    when: always
    paths: 
      - "$REPORT_NAME"
